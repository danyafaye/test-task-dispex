(this["webpackJsonptest-task-dispex"]=this["webpackJsonptest-task-dispex"]||[]).push([[0],{166:function(e,t,n){},167:function(e,t,n){},191:function(e,t,n){},192:function(e,t,n){},262:function(e,t,n){"use strict";n.r(t);var c=n(0),a=n(23),r=n.n(a),s=(n(166),n(167),n(2)),i=n(265),o=n(58),u=n(268),l=n(266),j=n(45),d=n(17),h=n.n(d),p=n(27),b=n(1),O=n(144),f=n.n(O).a.create({baseURL:"https://dispex.org/api/vtest"}),x=function(){return f.get("/Request/streets").then((function(e){return e.data}))},v=function(e){return f.get("/Request/houses/"+e).then((function(e){return e.data}))},m=function(e){return f.get("/Request/house_flats/"+e).then((function(e){return e.data}))},S="ADDRESS/STREET",g="ADDRESS/HOUSE",w="ADDRESS/HOUSE_FLAT",y={streets:[],houses:[],houseFlats:[]},C=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:y,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case S:return Object(b.a)(Object(b.a)({},e),{},{streets:t.streets});case g:return Object(b.a)(Object(b.a)({},e),{},{houses:t.houses});case w:return Object(b.a)(Object(b.a)({},e),{},{houseFlats:t.houseFlats});default:return e}},k=(n(191),function(e){return f.get("/HousingStock/clients?=".concat(e)).then((function(e){return e.data}))}),L="CLIENTS/CLIENTLIST",E={clients:[]},F=function(e){return{type:"CLIENTS/CLIENTLIST",data:e}},I=function(e){return function(){var t=Object(p.a)(h.a.mark((function t(n){var c;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,k(e);case 2:c=t.sent,n(F(c));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},T=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:E,t=arguments.length>1?arguments[1]:void 0;return t.type===L?Object(b.a)(Object(b.a)({},e),{},{clients:t.data}):e},N=n(74),D=n(40),R=n(264),A=n(269),H=n(270),U=n(271),_=n(272),q=n(273),B=(n(192),function(e,t,n,c,a){return f.post("/HousingStock/client",{id:e,phone:t,email:n,name:c,bindId:a}).then((function(e){return e.data}))}),P=function(e,t){return f.put("/HousingStock/bind_client",{addressId:e,clientId:t}).then((function(e){return e.data}))},V=function(e){return f.delete("/HousingStock/bind_client/"+e)},J=function(e,t){return function(){var n=Object(p.a)(h.a.mark((function n(c){return h.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,P(e,t);case 2:c(I(e));case 3:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()},z=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1?arguments[1]:void 0,n=arguments.length>2?arguments[2]:void 0,c=arguments.length>3?arguments[3]:void 0,a=arguments.length>4?arguments[4]:void 0;return function(){var r=Object(p.a)(h.a.mark((function r(s){var i;return h.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,B(e,t,n,c,0);case 2:i=r.sent,s(J(a,i.id));case 4:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}()},G=function(e,t){return function(){var n=Object(p.a)(h.a.mark((function n(c){return h.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,V(t);case 2:c(I(e));case 3:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()},K=n(8),M=function(e){var t=Object(c.useState)(!1),n=Object(s.a)(t,2),a=n[0],r=n[1],i=Object(c.useState)(!1),o=Object(s.a)(i,2),d=o[0],h=o[1],p=Object(c.useState)(""),b=Object(s.a)(p,2),O=b[0],f=b[1],x=Object(c.useState)(""),v=Object(s.a)(x,2),m=v[0],S=v[1],g=Object(c.useState)(""),w=Object(s.a)(g,2),y=w[0],C=w[1],k=Object(j.c)((function(e){return e.clientList.clients})),L=Object(j.b)();Object(c.useEffect)((function(){L(I(e.houseFlatId))}),[e.houseFlatId]);var E=function(e){f(e.target.value)},F=function(e){S(e.target.value)},T=function(e){C(e.target.value)},B=function(){r(!1)};return Object(K.jsx)("div",{className:"app-clients",children:Object(K.jsx)(N.a,{children:k?k.map((function(t){return Object(K.jsxs)(D.a,{span:6,children:[Object(K.jsxs)(R.a,{hoverable:!0,className:"app-clients-card",style:{margin:10},actions:[Object(K.jsx)(A.a,{onClick:function(){return n=t.bindId,void L(G(e.houseFlatId,n));var n}}),Object(K.jsx)(H.a,{onClick:function(){r(!0)}})],children:[Object(K.jsx)(U.a,{}),t.name?Object(K.jsx)("p",{className:"app-clients-name",children:t.name}):"",t.phone?Object(K.jsxs)("p",{className:"app-clients-phone",children:[Object(K.jsx)(_.a,{})," ",t.phone]}):"",t.email?Object(K.jsxs)("p",{className:"app-clients-email",children:[Object(K.jsx)(q.a,{})," ",t.email]}):""]},t.id),Object(K.jsx)(K.Fragment,{children:Object(K.jsxs)(u.a,{centered:!0,title:"\u0418\u0437\u043c\u0435\u043d\u0438\u0442\u044c \u0438\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u044e \u043e \u0436\u0438\u043b\u044c\u0446\u0435",visible:a,onOk:function(){return n=t.bindId,L(z(0,O,m,y,e.houseFlatId)),L(G(e.houseFlatId,n)),h(!0),void setTimeout((function(){r(!1),h(!1)}),2e3);var n},confirmLoading:d,onCancel:B,okText:"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c",cancelText:"\u041e\u0442\u043c\u0435\u043d\u0430",children:[Object(K.jsx)("span",{className:"app-phone-text",children:"\u0422\u0435\u043b\u0435\u0444\u043e\u043d"}),Object(K.jsx)("span",{style:{position:"absolute",left:"37%"},children:"e-mail"}),Object(K.jsxs)("div",{children:[Object(K.jsx)(l.a,{defaultValue:t.phone,onChange:E,addonBefore:"+7",style:{width:160,margin:"10px 0 0 0"}}),Object(K.jsx)(l.a,{defaultValue:t.email,onChange:F,style:{width:300,margin:"10px 0 0 7px"}})]}),Object(K.jsx)("p",{style:{margin:"10px 0 0 0"},children:"\u0424.\u0418.\u041e."}),Object(K.jsx)(l.a,{defaultValue:t.name,onChange:T,style:{margin:"10px 0 0 0",width:350}})]})})]})})):Object(K.jsx)("p",{children:"\u0416\u0438\u0442\u0435\u043b\u0438 \u043d\u0430 \u0434\u0430\u043d\u043d\u044b\u0439 \u043c\u043e\u043c\u0435\u043d\u0442 \u043e\u0442\u0441\u0443\u0442\u0441\u0442\u0432\u0443\u044e\u0442."})})})},Q=n(274),W=(n(142),i.a.Option),X=function(){var e=Object(j.b)(),t=Object(c.useState)(!1),n=Object(s.a)(t,2),a=n[0],r=n[1],d=Object(c.useState)(!1),b=Object(s.a)(d,2),O=b[0],f=b[1],S=Object(c.useState)(""),g=Object(s.a)(S,2),w=g[0],y=g[1],C=Object(c.useState)(""),k=Object(s.a)(C,2),L=k[0],E=k[1],F=Object(c.useState)(""),I=Object(s.a)(F,2),T=I[0],N=I[1],D=Object(c.useState)(""),R=Object(s.a)(D,2),A=R[0],H=R[1],U=Object(c.useState)(""),_=Object(s.a)(U,2),q=_[0],B=_[1],P=Object(c.useState)(""),V=Object(s.a)(P,2),J=V[0],G=V[1],X=Object(c.useState)(""),Y=Object(s.a)(X,2),Z=Y[0],$=Y[1],ee=Object(c.useState)(""),te=Object(s.a)(ee,2),ne=te[0],ce=te[1],ae=Object(c.useState)(""),re=Object(s.a)(ae,2),se=re[0],ie=re[1];Object(c.useEffect)((function(){e(function(){var e=Object(p.a)(h.a.mark((function e(t){var n;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x();case 2:n=e.sent,t({type:"ADDRESS/STREET",streets:n});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())})),Object(c.useEffect)((function(){var t;e((t=w,function(){var e=Object(p.a)(h.a.mark((function e(n){var c;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v(t);case 2:c=e.sent,n({type:"ADDRESS/HOUSE",houses:c});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()))}),[w]),Object(c.useEffect)((function(){var t;e((t=T,function(){var e=Object(p.a)(h.a.mark((function e(n){var c;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m(t);case 2:c=e.sent,n({type:"ADDRESS/HOUSE_FLAT",houseFlats:c});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()))}),[T]);var oe=Object(j.c)((function(e){return e.address.streets})),ue=Object(j.c)((function(e){return e.address.houses})),le=Object(j.c)((function(e){return e.address.houseFlats}));return Object(K.jsxs)("div",{className:"app-address-clients",children:[Object(K.jsx)("p",{children:"\u0410\u0434\u0440\u0435\u0441"}),Object(K.jsx)(i.a,{showSearch:!0,style:{width:200},placeholder:"\u0423\u043b\u0438\u0446\u0430",optionFilterProp:"children",filterOption:function(e,t){return t.children.toLowerCase().indexOf(e.toLowerCase())>=0},filterSort:function(e,t){return e.children.toLowerCase().localeCompare(t.children.toLowerCase())},onSelect:function(e,t){y(t.key),E(t.value)},children:oe.map((function(e){return Object(K.jsx)(W,{value:e.name,children:e.name},e.id)}))}),Object(K.jsx)(i.a,{showSearch:!0,style:{width:80},placeholder:"\u0414\u043e\u043c",optionFilterProp:"children",filterOption:function(e,t){return t.children.toLowerCase().indexOf(e.toLowerCase())>=0},filterSort:function(e,t){return e.children.toLowerCase().localeCompare(t.children.toLowerCase())},onSelect:function(e,t){N(t.key),H(t.value)},children:ue.map((function(e){return Object(K.jsx)(W,{value:e.name,children:e.name},e.id)}))}),Object(K.jsx)(i.a,{showSearch:!0,style:{width:110},placeholder:"\u041a\u0432/\u043e\u0444\u0438\u0441",optionFilterProp:"children",filterOption:function(e,t){return t.children.toLowerCase().indexOf(e.toLowerCase())>=0},filterSort:function(e,t){return e.children.toLowerCase().localeCompare(t.children.toLowerCase())},onSelect:function(e,t){B(t.key),G(t.value)},children:le.map((function(e){return Object(K.jsx)(W,{value:e.name,children:e.name},e.id)}))}),Object(K.jsxs)("p",{className:"app-address-street",children:[L?Object(K.jsxs)("span",{children:["\u0443\u043b. ",L]}):"",A?Object(K.jsxs)("span",{children:[", ",A]}):"",J?Object(K.jsxs)("span",{children:[", ",J,Object(K.jsx)(o.a,{style:{margin:"0 0 0 10px"},shape:"circle",icon:Object(K.jsx)(Q.a,{}),onClick:function(){r(!0)}})]}):""]}),Object(K.jsx)(K.Fragment,{children:Object(K.jsxs)(u.a,{centered:!0,title:[Object(K.jsx)(Q.a,{})," \u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0436\u0438\u043b\u044c\u0446\u0430"],visible:a,onOk:function(){e(z(0,Z,ne,se,q)),f(!0),setTimeout((function(){r(!1),f(!1),$(""),ie(""),ce("")}),2e3)},confirmLoading:O,onCancel:function(){r(!1)},okText:"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c",cancelText:"\u041e\u0442\u043c\u0435\u043d\u0430",children:[Object(K.jsxs)("p",{style:{"font-weight":"bold"},children:["\u0443\u043b. ",L,", ",A,", ",J]}),Object(K.jsx)("span",{className:"app-phone-text",children:"\u0422\u0435\u043b\u0435\u0444\u043e\u043d"}),Object(K.jsx)("span",{style:{position:"absolute",left:"37%"},children:"e-mail"}),Object(K.jsxs)("div",{children:[Object(K.jsx)(l.a,{value:Z,addonBefore:"+7",style:{width:160,margin:"10px 0 0 0"},onChange:function(e){$(e.target.value)}}),Object(K.jsx)(l.a,{value:ne,style:{width:300,margin:"10px 0 0 7px"},onChange:function(e){ce(e.target.value)}})]}),Object(K.jsx)("p",{style:{margin:"10px 0 0 0"},children:"\u0424.\u0418.\u041e."}),Object(K.jsx)(l.a,{value:se,style:{margin:"10px 0 0 0",width:350},onChange:function(e){ie(e.target.value)}})]})}),Object(K.jsx)(M,{houseFlatId:q})]})},Y=n(267),Z=Y.a.Content,$=Y.a.Footer,ee=function(){return Object(K.jsx)("div",{className:"app-wrapper",children:Object(K.jsxs)(Y.a,{className:"layout",children:[Object(K.jsx)(Z,{style:{padding:"0 50px"},children:Object(K.jsx)("div",{className:"site-layout-content",children:Object(K.jsx)(X,{})})}),Object(K.jsx)($,{})]})})},te=n(158),ne=n(110),ce=n(153),ae=Object(ne.b)({address:C,clientList:T}),re=Object(ne.c)(ae,Object(ne.a)(ce.a));r.a.render(Object(K.jsx)(te.a,{children:Object(K.jsx)(j.a,{store:re,children:Object(K.jsx)(ee,{})})}),document.getElementById("root"))}},[[262,1,2]]]);
//# sourceMappingURL=main.348de223.chunk.js.map